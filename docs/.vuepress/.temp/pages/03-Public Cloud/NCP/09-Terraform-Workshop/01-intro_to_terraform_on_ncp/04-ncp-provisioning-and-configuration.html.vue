<template><div><h1 id="_04-á„á…¦á„…á…¡á„‘á…©á†·-á„‘á…³á„…á…©á„‡á…µá„Œá…¥á„‚á…µá†¼-á„ƒá…©á„€á…®-á„‰á…¡á„‹á…­á†¼-á„†á…µá†¾-á„€á…®á„‰á…¥á†¼" tabindex="-1"><a class="header-anchor" href="#_04-á„á…¦á„…á…¡á„‘á…©á†·-á„‘á…³á„…á…©á„‡á…µá„Œá…¥á„‚á…µá†¼-á„ƒá…©á„€á…®-á„‰á…¡á„‹á…­á†¼-á„†á…µá†¾-á„€á…®á„‰á…¥á†¼" aria-hidden="true">#</a> 04. í…Œë¼í¼ í”„ë¡œë¹„ì €ë‹ ë„êµ¬ ì‚¬ìš© ë° êµ¬ì„±</h1>
<h2 id="terraform-á„‘á…³á„…á…©á„‡á…µá„Œá…¥á„‚á…µá†¼-á„ƒá…©á„€á…®-á„‰á…¡á„‹á…­á†¼" tabindex="-1"><a class="header-anchor" href="#terraform-á„‘á…³á„…á…©á„‡á…µá„Œá…¥á„‚á…µá†¼-á„ƒá…©á„€á…®-á„‰á…¡á„‹á…­á†¼" aria-hidden="true">#</a> Terraform í”„ë¡œë¹„ì €ë‹ ë„êµ¬ ì‚¬ìš©</h2>
<p>Terraformì„ ì‚¬ìš©í•˜ì—¬ ê°€ìƒ ë¨¸ì‹  ë˜ëŠ” ì»¨í…Œì´ë„ˆë¥¼ ì„¸ìš°ê³  ë‚˜ë©´ ìš´ì˜ ì²´ì œì™€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì„± í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì—¬ê¸°ì—ì„œ <mark>Provisioner</mark> ê°€ ë“±ì¥í•©ë‹ˆë‹¤.</p>
<p>Terraformì€ Bash, Powershell, Chef, Puppet, Ansible ë“±ì„ í¬í•¨í•œ ì—¬ëŸ¬ ìœ í˜•ì˜ Provisionerë¥¼ ì§€ì›í•©ë‹ˆë‹¤.</p>
<p><a href="https://www.terraform.io/docs/provisioners/index.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/provisioners/index.html<ExternalLinkIcon/></a></p>
<h2 id="file-provisioner" tabindex="-1"><a class="header-anchor" href="#file-provisioner" aria-hidden="true">#</a> File Provisioner</h2>
<p>Terraform íŒŒì¼ í”„ë¡œë¹„ì €ë‹ ë„êµ¬ëŠ” ì›ê²© ì‹œìŠ¤í…œì— íŒŒì¼ì„ ë³µì‚¬í•©ë‹ˆë‹¤.</p>
<div class="language-hcl line-numbers-mode" data-ext="hcl"><pre v-pre class="language-hcl"><code><span class="token keyword">provisioner<span class="token type variable"> "file" </span></span><span class="token punctuation">{</span>
  <span class="token property">source</span>        <span class="token punctuation">=</span> <span class="token string">"files/"</span>
  <span class="token property">destination</span>   <span class="token punctuation">=</span> <span class="token string">"/home/<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token type variable">admin_username</span><span class="token punctuation">}</span></span>/"</span>
  <span class="token keyword">connection</span> <span class="token punctuation">{</span>
    <span class="token property">type</span>        <span class="token punctuation">=</span> <span class="token string">"ssh"</span>
    <span class="token property">user</span>        <span class="token punctuation">=</span> var.username
    <span class="token property">private_key</span> <span class="token punctuation">=</span> file(var.ssh_key)
    <span class="token property">host</span>        <span class="token punctuation">=</span> $<span class="token punctuation">{</span>self.ip<span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>provisioner ë¸”ë¡ ì•ˆì—ìˆëŠ” ì½”ë“œì˜ connection ë¸”ë¡ì— ì£¼ëª©í•˜ì„¸ìš”. íŒŒì¼ í”„ë¡œë¹„ì €ë‹ ë„êµ¬ëŠ” <code v-pre>SSH</code>, <code v-pre>WinRM</code> ì—°ê²°ì„ ëª¨ë‘ ì§€ì›í•©ë‹ˆë‹¤.</p>
<h2 id="remote-exec-provisioner" tabindex="-1"><a class="header-anchor" href="#remote-exec-provisioner" aria-hidden="true">#</a> Remote Exec Provisioner</h2>
<p><code v-pre>Remote Exec Provisioner</code>ë¥¼ ì‚¬ìš©í•˜ë©´ ëŒ€ìƒ í˜¸ìŠ¤íŠ¸ì—ì„œ ìŠ¤í¬ë¦½íŠ¸ ë˜ëŠ” ê¸°íƒ€ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ìë™ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ìˆëŠ” ê²½ìš° (ì˜ˆ : ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ì¹˜ í”„ë¡œê·¸ë¨) <code v-pre>remote-exec</code>ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-hcl line-numbers-mode" data-ext="hcl"><pre v-pre class="language-hcl"><code><span class="token keyword">provisioner<span class="token type variable"> "remote-exec" </span></span><span class="token punctuation">{</span>
  <span class="token property">inline</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
    <span class="token string">"sudo chown -R <span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token type variable">admin_username</span><span class="token punctuation">}</span></span>:<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token type variable">admin_username</span><span class="token punctuation">}</span></span> /var/www/html"</span>,
    <span class="token string">"chmod +x *.sh"</span>,
    <span class="token string">"PLACEHOLDER=<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token type variable">placeholder</span><span class="token punctuation">}</span></span> WIDTH=<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token type variable">width</span><span class="token punctuation">}</span></span> HEIGHT=<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token type variable">height</span><span class="token punctuation">}</span></span> PREFIX=<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token type variable">prefix</span><span class="token punctuation">}</span></span> ./deploy_app.sh"</span>,
  <span class="token punctuation">]</span>
...
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ì´ ì˜ˆì—ì„œëŠ” ì¼ë¶€ ê¶Œí•œ ë° ì†Œìœ ê¶Œì„ ë³€ê²½í•˜ê³  ì¼ë¶€ í™˜ê²½ ë³€ìˆ˜ê°€ìˆëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ëª‡ ê°€ì§€ ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>
<h2 id="terraform-config-management-tools" tabindex="-1"><a class="header-anchor" href="#terraform-config-management-tools" aria-hidden="true">#</a> Terraform &amp; Config Management Tools</h2>
<figure><img src="@source/03-Public Cloud/NCP/09-Terraform-Workshop/01-intro_to_terraform_on_ncp/image/cpa.jpg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>Terraformì€ Chef, Puppet, Ansibleê³¼ ê°™ì€ ì¼ë°˜ì ì¸ êµ¬ì„± ê´€ë¦¬ ë„êµ¬ì™€ ì˜ ì‘ë™í•©ë‹ˆë‹¤.</p>
<ul>
<li>
<p>Official Chef Terraform provisioner:<br>
<a href="https://www.terraform.io/docs/provisioners/chef.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/provisioners/chef.html<ExternalLinkIcon/></a></p>
</li>
<li>
<p>Run Puppet with 'local-exec':<br>
<a href="https://www.terraform.io/docs/provisioners/local-exec.html" target="_blank" rel="noopener noreferrer">https://www.terraform.io/docs/provisioners/local-exec.html<ExternalLinkIcon/></a></p>
</li>
<li>
<p>Terraform and Ansible - Better Together:<br>
<a href="https://github.com/scarolan/ansible-terraform" target="_blank" rel="noopener noreferrer">https://github.com/scarolan/ansible-terraform<ExternalLinkIcon/></a></p>
</li>
</ul>
<h2 id="terraform-provisionerá„‹á…¦-á„ƒá…¢á„’á…¡á†«-á„ƒá…©á„‹á…®á†·á„†á…¡á†¯" tabindex="-1"><a class="header-anchor" href="#terraform-provisionerá„‹á…¦-á„ƒá…¢á„’á…¡á†«-á„ƒá…©á„‹á…®á†·á„†á…¡á†¯" aria-hidden="true">#</a> Terraform Provisionerì— ëŒ€í•œ ë„ì›€ë§</h2>
<p><code v-pre>remote-exec</code>ì™€ ê°™ì€ Terraform í”„ë¡œë¹„ì €ë‹ ë„êµ¬ëŠ” ëª‡ ê°€ì§€ ê°„ë‹¨í•œ ëª…ë ¹ì´ë‚˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•´ì•¼ í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤. ë” ë³µì¡í•œ êµ¬ì„± ê´€ë¦¬ì˜ ê²½ìš° Chef ë˜ëŠ” Ansibleê³¼ ê°™ì€ ë„êµ¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>
<p>ProvisionerëŠ” Terraform ì‹¤í–‰ì´ <mark>ì²˜ìŒ ì‹¤í–‰ë  ë•Œ</mark> ë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì˜ë¯¸ì—ì„œ ê·¸ ë™ì‘ë“¤ì€ ë©±ë“±ì„±ì„ ë„ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
<p>ìˆ˜ëª…ì´ ê¸´ VM ë˜ëŠ” ì„œë²„ì˜ ì§€ì†ì ì¸ ìƒíƒœ ê´€ë¦¬ê°€ í•„ìš”í•œ ê²½ìš° ì´ê°™ì€ êµ¬ì„± ê´€ë¦¬ ë„êµ¬ë¥¼ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë°˜ë©´ì— ë³€ê²½ ë¶ˆê°€ëŠ¥í•œ ì¸í”„ë¼ë¥¼ ì›í•˜ë©´ <a href="https://www.packer.io/" target="_blank" rel="noopener noreferrer">Packer<ExternalLinkIcon/></a> ê°™ì€ ì´ë®¤í„°ë¸”ì„ ìœ„í•œ ë¹Œë“œ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Dqwk7fYHhVQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<hr>
<p>ì‹¤ìŠµì„ ìœ„í•´ ë‹¤ìŒì¥ìœ¼ë¡œ ì´ë™í•˜ì„¸ìš”.</p>
<p><RouterLink to="/03-Public%20Cloud/NCP/09-Terraform-Workshop/01-intro_to_terraform_on_ncp/04-z-lab_provisioning_and_configuration.html">ğŸ’» Lab - Provisioners, Variables, Outputs</RouterLink></p>
</div></template>


