<template><div><h1 id="lab-provisioners-variables-outputs" tabindex="-1"><a class="header-anchor" href="#lab-provisioners-variables-outputs" aria-hidden="true">#</a> ğŸ’» Lab - Provisioners, Variables, Outputs</h1>
<h3 id="á„‘á…§á†«á„Œá…µá†¸á„€á…µá„‹á…¦á„‰á…¥-á„‹á…§á†¯á„€á…µ" tabindex="-1"><a class="header-anchor" href="#á„‘á…§á†«á„Œá…µá†¸á„€á…µá„‹á…¦á„‰á…¥-á„‹á…§á†¯á„€á…µ" aria-hidden="true">#</a> í¸ì§‘ê¸°ì—ì„œ ì—´ê¸°</h3>
<figure><img src="@source/03-PublicCloud/NCP/09-Terraform-Workshop/01-intro_to_terraform_on_ncp/image/lab1-02.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<ul>
<li>VSCodeë¥¼ ì‹¤í–‰í•˜ê³  File(íŒŒì¼) ë©”ë‰´ì—ì„œ <code v-pre>Open Folder...</code> ë¥¼ í´ë¦­í•©ë‹ˆë‹¤.</li>
<li>ì•ì„œ ì‹¤ìŠµì„ ì§„í–‰í•œ <code v-pre>lab02</code>ì„ ì—´ì–´ì¤ë‹ˆë‹¤.</li>
</ul>
<hr>
<h2 id="ğŸ› ï¸-use-a-provisioner" tabindex="-1"><a class="header-anchor" href="#ğŸ› ï¸-use-a-provisioner" aria-hidden="true">#</a> ğŸ› ï¸ Use a Provisioner</h2>
<Presentation id="presentation-25" code="eJx9Ustu01AQ3d+vGJRNvEj4AcqGX2AZ1U7AtJESHDkpFSJIDjFg4iC6qJsUHHCkViUoC5OkUiqVH/Kd+w/MuG7dSmmPZPtqzjzOGV9RKBTguWnb1VeW3QR16MppKC9cjBzpT0B+c5PzuRwcAvYn6P4F9ENQQQhy4dH5RB19kQcz6XvSPykLUSqVRNpRDS7k0uVE7PfU8QwnLmAU4vFaBeNkGXFH9cPFT18p3MPvMxwdoEvZWcsxnjmAwQAH51lzKOJkxTyF+L0Yy1+X5XJZuzXV6NwYqbZajbcGyNNLwJ8fZXSqgghkMJRn3O0en0nsQBIHJJTIXAuRcko5fz4T67CyW/amMUYB21NHXq5WCFLLJuXSSRb/7g7nJv0eyN9r9KO0dDhMVqurzQBl8JKv9k2xbBNM3fN32OOHOS2Rs0dzwFFMSngmemOy72UGeMA6BgxT5cmiz5u51msYxu6LhujY9Z0d027DFrwTQKjt1Rsv9dd7zZppU7BTb5rtTrXZKmriPRdl66dTrdreFfpGiCfwzNpvQ8N6Y+a37RE8FUDVG5COTlGhZ1vXt/MIh4qWpVWum+cMoajrGtcwtMrjyl2W0e3yhH3obqKyj9h6CKnv/1FwgQc=" theme="blood"></Presentation><h4 id="provisionerá„…á…³á†¯-á„‰á…®á„Œá…¥á†¼á„’á…¡á†¸á„‚á…µá„ƒá…¡" tabindex="-1"><a class="header-anchor" href="#provisionerá„…á…³á†¯-á„‰á…®á„Œá…¥á†¼á„’á…¡á†¸á„‚á…µá„ƒá…¡" aria-hidden="true">#</a> ğŸ’» Provisionerë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.</h4>
<p><code v-pre>main.tf</code> íŒŒì¼ì„ ì—´ì–´ <code v-pre>remote-exec</code> í•­ëª©ì´ ìˆëŠ” ê³³ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.</p>
<p><code v-pre>inline</code> í•­ëª©ì— ë‹¤ìŒì„ ë‘ì¤„ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token string">"sudo apt -y install cowsay"</span>,
<span class="token string">"cowsay Mooooooooooo!"</span>,
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip">
<p class="hint-container-title">íŒ</p>
<p><code v-pre>terraform fmt</code>ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ì½”ë“œë¥¼ ë©‹ì§€ê²Œ ì •ë ¬ í•  ìˆ˜ ìˆëŠ” ì¢‹ì€ ì‹œê°„ ì…ë‹ˆë‹¤.</p>
</div>
<p>ì´ì œ ë³€ê²½ ì‚¬í•­ì„ ì ìš©í•˜ì‹­ì‹œì˜¤.</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code>terraform apply -auto-approve
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ë¡œê·¸ ì¶œë ¥ì„ ë’¤ë¡œ ìŠ¤í¬ë¡¤í•©ë‹ˆë‹¤. &quot;Moooooooo!&quot;ë¼ê³  ë§í•˜ëŠ” ASCII ì•„íŠ¸ ì•”ì†Œê°€ ë³´ì¼ ê²ƒì…ë‹ˆë‹¤.</p>
<details class="hint-container details"><summary>Result example</summary>
<figure><img src="@source/03-PublicCloud/NCP/09-Terraform-Workshop/01-intro_to_terraform_on_ncp/image/lab4-01.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
</details>
<hr>
<h2 id="ğŸ–¨ï¸-add-an-output" tabindex="-1"><a class="header-anchor" href="#ğŸ–¨ï¸-add-an-output" aria-hidden="true">#</a> ğŸ–¨ï¸ Add an Output</h2>
<Presentation id="presentation-57" code="eJxtkM1OwlAQhfd9iklY4xMYn8K9uChxg5gKe35Kgi1EErlQTEvuokQwLBpaSY31hTpz38G55TeR1c3cmTlzvmOUSiWgrY9yQdMR2T7cmpZ1X61bNcBhREGi7IhmLVBimf94QEGGkQeqNyQnVE6KiwyUlymxUkIC9Xli3ifnC90+uuGVsZcOWkBuqCYvLAjYDrAjAcUAqLOm9xXNR3w833DtS66V8IGkwDjR8iRtdNdKeOiMtaf90uV7RrlcNgqoSuMIYplVy3x+qAB+9lB+F266bdX1QQ0GTESBzWCpGtvIxXSkNfWxXTePM8DXWZ5GajZm0COaRjkJHva1ZYxb+eaXLdMHd4Rz0eAp6ENINvAIuT7vJ3nMeO62+NRBTVKSPr5JrXiGVm82npqNExmDFDlfTgfdJQOd3+OIZYir5L8mXO/eu8f7mnlTOZc+RvAHPVNNHQ==" theme="blood"></Presentation><h4 id="outputá„‹á…³á†¯-á„‰á…®á„Œá…¥á†¼á„’á…¡á†¸á„‚á…µá„ƒá…¡" tabindex="-1"><a class="header-anchor" href="#outputá„‹á…³á†¯-á„‰á…®á„Œá…¥á†¼á„’á…¡á†¸á„‚á…µá„ƒá…¡" aria-hidden="true">#</a> ğŸ’» Outputì„ ìˆ˜ì •í•©ë‹ˆë‹¤.</h4>
<p><code v-pre>output.tf</code> íŒŒì¼ì„ ì—´ì–´ ì•„ë˜ í•­ëª©ì„ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
<div class="language-hcl line-numbers-mode" data-ext="hcl"><pre v-pre class="language-hcl"><code><span class="token keyword">output<span class="token type variable"> "ssh_info" </span></span><span class="token punctuation">{</span>
  <span class="token property">value</span> <span class="token punctuation">=</span> nonsensitive(<span class="token string">"sshpass -p '<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">data</span><span class="token punctuation">.</span><span class="token type variable">ncloud_root_password</span><span class="token punctuation">.</span>hashicat<span class="token punctuation">.</span>root_password<span class="token punctuation">}</span></span>' ssh root@<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span>ncloud_public_ip<span class="token punctuation">.</span>hashicat<span class="token punctuation">.</span>public_ip<span class="token punctuation">}</span></span> -oStrictHostKeyChecking=no"</span>)
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>í•´ë‹¹ outputì˜ ì´ë¦„ì€ <code v-pre>ssh_info</code> ì…ë‹ˆë‹¤.</p>
<p>ì–´ë–¤ ìœ í˜•ì˜ ì¶œë ¥ì´ ìœ íš¨í•œì§€ ë³´ë ¤ë©´ ë¬¸ì„œ í˜ì´ì§€ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.</p>
<ul>
<li>ncloud_root_password : <a href="https://registry.terraform.io/providers/NaverCloudPlatform/ncloud/latest/docs/data-sources/root_password#argument-reference" target="_blank" rel="noopener noreferrer">https://registry.terraform.io/providers/NaverCloudPlatform/ncloud/latest/docs/data-sources/root_password#argument-reference<ExternalLinkIcon/></a></li>
<li>ncloud_public_ip :<a href="https://registry.terraform.io/providers/NaverCloudPlatform/ncloud/latest/docs/resources/public_ip#attributes-reference" target="_blank" rel="noopener noreferrer">https://registry.terraform.io/providers/NaverCloudPlatform/ncloud/latest/docs/resources/public_ip#attributes-reference<ExternalLinkIcon/></a></li>
</ul>
<p><code v-pre>output.tf</code>ì— ìƒˆë¡œìš´ ë‚´ìš©ì„ ì €ì¥í•˜ê³  <code v-pre>terraform refresh</code> ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ ìƒˆë¡œìš´ ì¶œë ¥ì„ í™•ì¸í•©ë‹ˆë‹¤.</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code>terraform refresh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code v-pre>terraform output</code> ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ ëª¨ë“  ì¶œë ¥ì„ ë³¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code>terraform output
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr>
<h2 id="ğŸ¶-fun-with-variables" tabindex="-1"><a class="header-anchor" href="#ğŸ¶-fun-with-variables" aria-hidden="true">#</a> ğŸ¶ Fun With Variables</h2>
<Presentation id="presentation-95" code="eJxNUVFq20AQ/d9TDPhbC2nrn0Jv0QNElmVXRIqC4tT0bykKKLIhpVitYiSjgkJIcalq160CyYW0oztkVpES/+282ffevBnW6/Xgvel5+sj1HJBbgUGM37/IcAH9qhB4I0AhucA0BlwW6GcEJJj41AVcBRju5CyQs5zDwTvcJdU2g756YCbesgMO8ue5zO4w96FezOUqrv6XoO2hGOakhnex/JEAzvL62wV7xaHardH/A/V8juk9ESbdkHwy+qh7p22HZgX0c8wi9ppDfRVXm4c2BpHwIm6xZvz0Xv4T7A2Jl4Xclp2HBiRo6QPbPCVx9fOpXxVfWZ8Dfl7j8hZXZBTE8vKKUtPs10r+RpBxHcXNmqIQUwHKa1m8kGjAajNvOZhS3uUCN7/q6LZdG2OaprHmEFRiSqkEHJ7YumF+cO2h6R22eZ72k8hLv47UESjQKlCHIpq8Lqlay99liyn/9G8dUn3eGWnQqA7dMT82J105MHWPG65D9XQ65SPLtp0z2vWnPbD5aOhjs8WeiUNuKSHb9UxnZFvGUSc10A332HGNo7OTfY7ljJvyEU+ASIQ=" theme="blood"></Presentation><h4 id="á„‡á…§á†«á„‰á…®á„…á…³á†¯-á„Œá…©á„Œá…¥á†¼á„’á…¡á†¸á„‚á…µá„ƒá…¡" tabindex="-1"><a class="header-anchor" href="#á„‡á…§á†«á„‰á…®á„…á…³á†¯-á„Œá…©á„Œá…¥á†¼á„’á…¡á†¸á„‚á…µá„ƒá…¡" aria-hidden="true">#</a> ğŸ’» ë³€ìˆ˜ë¥¼ ì¡°ì •í•©ë‹ˆë‹¤.</h4>
<p>Terraform ë³€ìˆ˜ë¥¼ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì—ëŠ” ì—¬ëŸ¬ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤. ì§€ê¸ˆê¹Œì§€ <code v-pre>terraform.tfvars</code> íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ë³€ìˆ˜ë¥¼ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.</p>
<p>ëª…ë ¹ì¤„ì—ì„œ ê¸°ë³¸ê°’ê³¼ ë‹¤ë¥¸ <code v-pre>height</code>, <code v-pre>width</code> ë³€ìˆ˜ë¥¼ ì‚¬ìš© í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹¤ì‹œ ë°°í¬í•´ ë³´ì‹­ì‹œì˜¤.</p>
<p>ë³€ê²½ ì‚¬í•­ì„ ê´€ì°°í•˜ê¸° ìœ„í•´ ì ìš©í•  ë•Œë§ˆë‹¤ ì›¹ ì•±ì„ ë‹¤ì‹œ ë¡œë“œí•©ë‹ˆë‹¤.</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code>terraform apply -auto-approve <span class="token parameter variable">-var</span> <span class="token assign-left variable">height</span><span class="token operator">=</span><span class="token number">600</span> <span class="token parameter variable">-var</span> <span class="token assign-left variable">width</span><span class="token operator">=</span><span class="token number">800</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ë‹¤ìŒìœ¼ë¡œ Terraformì´ ì½ì„ ìˆ˜ ìˆëŠ” í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•´ ë³´ì‹­ì‹œì˜¤. ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ <code v-pre>placeholder</code> ë³€ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">TF_VAR_placeholder</span><span class="token operator">=</span>placedog.net
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>í™˜ê²½ ë³€ìˆ˜ ì ìš© í›„ <code v-pre>terraform apply -auto-approve</code>ë¥¼ ì‹¤í–‰í•˜ì—¬ ë‹¤ì‹œ ì ìš©í•´ ë´…ë‹ˆë‹¤.</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code>terraform apply -auto-approve
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ì´ì œ ëª…ë ¹ì¤„ì—ì„œ ë™ì¼í•œ ë³€ìˆ˜ë¥¼ ë‹¤ë¥´ê²Œ ì„¤ì •í•˜ì—¬ ë‹¤ì‹œ ì‹œë„í•˜ì‹­ì‹œì˜¤.</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code>terraform apply -auto-approve <span class="token parameter variable">-var</span> <span class="token assign-left variable">placeholder</span><span class="token operator">=</span>placebear.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ì–´ë–¤ ë³€ìˆ˜ê°€ ìš°ì„ ì‹œ ë˜ì—ˆìŠµë‹ˆê¹Œ? ì˜ ì´í•´ ë˜ì…¨ë‚˜ìš”?</p>
<p>ë‹¤ìŒ <a href="https://www.terraform.io/docs/language/values/variables.html#variable-definition-precedence" target="_blank" rel="noopener noreferrer">ê³µì‹ë¬¸ì„œ<ExternalLinkIcon/></a>ë¥¼ ì°¸ê³ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<hr>
<h2 id="quiz-time-4-terraform-variables" tabindex="-1"><a class="header-anchor" href="#quiz-time-4-terraform-variables" aria-hidden="true">#</a> ğŸ˜± Quiz Time 4. Terraform Variables</h2>
<p>Q. <code v-pre>*.tfvars</code> íŒŒì¼ê³¼ í™˜ê²½ ë³€ìˆ˜ì— ë™ì¼í•œ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì–´ëŠ ê²ƒì´ ìš°ì„ í•©ë‹ˆê¹Œ?</p>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-0" disabled="disabled"><label class="task-list-item-label" for="task-item-0"> í™˜ê²½ë³€ìˆ˜ë¡œ êµ¬ì„±ëœ ë³€ìˆ˜</label></li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-1" disabled="disabled"><label class="task-list-item-label" for="task-item-1"> tfvars íŒŒì¼ì˜ ë³€ìˆ˜</label></li>
</ul>
<details class="hint-container details"><summary>ë‹µ</summary>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-2" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-2"> tfvars íŒŒì¼ì˜ ë³€ìˆ˜</label></li>
</ul>
</details>
<hr>
<p>ì´ ì¥ì—ì„œ ìš°ë¦¬ëŠ” :</p>
<ul>
<li>Terraform Provisionersì— ëŒ€í•´ ë°°ì› ìŠµë‹ˆë‹¤.</li>
<li><code v-pre>file</code> ê³¼ <code v-pre>remote-exec</code> í”„ë¡œë¹„ì €ë‹ ë„êµ¬ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.</li>
<li>ìƒˆë¡œìš´ í”„ë¡œë¹„ì €ë‹ ë‹¨ê³„ë¡œ ì›¹ì„œë²„ ì¬êµ¬ì„± í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</li>
</ul>
</div></template>


